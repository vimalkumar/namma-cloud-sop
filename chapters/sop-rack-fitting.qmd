# SOP: Server Rack Fitting & Installation {#sec-sop-rack}

## Purpose

This SOP defines the standard procedure for physically installing servers into data center racks. It covers rail kit installation, server mounting, alignment verification, and post-installation checks.

::: {.callout-note}
## Before You Start — Read This First
**MUST READ:** [Hardware Visual Guide](#sec-hardware-visual-guide)

You need to understand:
- **Rack structure** — What racks look like, how they're organized
- **U-numbering** — How to count U positions (U1 is at the BOTTOM)
- **Server anatomy** — Front vs rear, what components are where

Come back to the Hardware Visual Guide whenever you need to identify a component.
:::

::: {.callout-warning}
## Lesson Learned
During initial rack fitting, we encountered alignment issues with certain servers, and assembled (non-branded) servers did not fit well into standard racks. This SOP ensures every installation is precise and verified.
:::

## Scope

- Installation of **HP DL385** servers into standard 42U racks
- Installation of **assembled servers** (with or without rail kits)
- Rack preparation and space planning
- Physical alignment and securing

## Safety First

::: {.callout-important}
## Safety Rules — Non-Negotiable
1. **Never** attempt to lift a server alone — minimum 2 people always
2. **Never** work on a rack with the stabilizer feet not deployed (tip-over risk)
3. **Wear anti-static wrist straps** when handling servers
4. **Remove all jewelry** (rings, watches, bracelets) before working inside racks
5. **Use proper lifting technique** — bend knees, straight back
6. **Ensure adequate lighting** before starting work
7. **Keep the work area clean** — no loose screws, cables, or tools on the floor
:::

## Pre-Installation Checklist

### Step 1: Rack Preparation

**Note:** Racks come from datacenters pre-installed and level. Verify these conditions:

- [ ] Rack is securely bolted to the floor
- [ ] Stabilizer feet are extended (front and rear)
- [ ] PDUs (Power Distribution Units) are installed and tested
- [ ] Cable management arms/channels are in place
- [ ] Adequate clearance: front (≥ 1 meter), rear (≥ 0.8 meter)
- [ ] Temperature in the cold aisle is within spec (18-27°C)

::: {.callout-important}
## CRITICAL: Understanding U-Numbering

**U1 is at the BOTTOM. U42 is at the TOP.**

Think of a building:
- **U1 = Ground floor** (bottom, where you stand)
- **U42 = 42nd floor** (top)

**Always count UP from the floor, never down from the ceiling.**

Common mistake: Counting from top down. This is WRONG.

How to verify:
1. Stand in front of rack
2. Look at the rack post (vertical metal rail)
3. Find the LOWEST marking = U1
4. Count upward: U1, U2, U3... U42

Example: "Install server at U15" means:
- Start at bottom (U1)
- Count UP 15 positions
- That's where the server goes
:::

- [ ] Rack U-numbers are visible and readable (U1 at bottom, U42 at top)

### Step 2: Space Planning

Before installing any server, plan the rack layout:

**Recommended Rack Layout (42U Rack - Vertical View):**

```
        ║                                              ║
        ║  [ U42 ] ──────────────────────────────────  ║ ← TOP
        ║  [ U41 ]  Network Switches                   ║
        ║  [ U40 ]  & Patch Panels                     ║
        ║  [ U39 ] ──────────────────────────────────  ║
        ║  [ U38 ]  Cable Management                   ║
        ║  [ U37 ]  & Blank Panels                     ║
        ║  [ U36 ]                                     ║
        ║  [ U35 ] ──────────────────────────────────  ║
        ║  [ U34 ]                                     ║
        ║  [ ... ]  Servers                            ║
        ║  [ U10 ]  (Heaviest at Bottom)               ║
        ║  [ U09 ]                                     ║
        ║  [ U08 ]                                     ║
        ║  [ U07 ] ──────────────────────────────────  ║
        ║  [ U06 ]  UPS / Power                        ║
        ║  [ U05 ]  Equipment                          ║
        ║  [ U04 ]                                     ║
        ║  [ U03 ] ──────────────────────────────────  ║
        ║  [ U02 ]  Heavy / Dense Servers              ║
        ║  [ U01 ] ──────────────────────────────────  ║ ← BOTTOM (Floor)
        ╚══════════════════════════════════════════════╝

        Count UP from floor: U1, U2, U3... U42
```

**Key Rules for Space Planning:**

| Rule | Rationale |
|------|-----------|
| Heaviest servers at the bottom | Center of gravity — prevents tipping |
| Network equipment at the top | Cable runs come from overhead trays |
| Leave 1U gap between groups | Airflow management |
| Fill empty spaces with blank panels | Prevents hot/cold air mixing |
| Plan for 30% future growth | Don't fill the rack completely |

: Rack Space Planning Rules {.striped}

- [ ] Rack layout plan documented and approved by Team Lead
- [ ] Each server's position (U number) assigned
- [ ] Required accessories identified (rail kits, shelves, screws, cage nuts)

### Step 3: Server Compatibility Verification

**Before** attempting to install any server, measure it to ensure it fits the rack.

::: {.callout-tip}
## How to Measure a Server

**Width (Ear-to-Ear):**
- Measure across the **front** of the server
- From left mounting ear to right mounting ear
- Mounting ears = metal brackets on sides with screw holes
- Standard rack width = **482mm (19 inches)**

**Depth (Front-to-Rear):**
- Measure from front face to the rear-most point
- Include anything that sticks out (ports, handles, PSU)
- Must be ≤ rack internal depth (usually ~1000mm)

**Height (U Count):**
- Look at the front bezel (removable cover)
- Count how many rack U positions it covers
- **1U = 1.75 inches (44.45mm) tall**
- 2U server = 3.5 inches = covers 2 U markings

**Weight:**
- Check server spec sheet or label on server
- Typical: 1U server = 10-20kg, 2U server = 20-30kg
- Rail kit or shelf must support this weight
:::

#### HP DL385

| Parameter | Expected Value | Actual Value | Match? |
|-----------|---------------|--------------|--------|
| Form factor | 2U | _______ | ☐ |
| Width (ear-to-ear) | 482 mm (19") | _______ | ☐ |
| Depth (front-to-rear) | ~734 mm | _______ | ☐ |
| Weight | ~22-30 kg | _______ | ☐ |
| Rail kit model | HP DL385 Gen10+ kit | _______ | ☐ |

#### Assembled Servers

::: {.callout-caution}
## Extra Verification Required
Assembled servers may not conform to standard 19" rack dimensions. **Measure every assembled server** before attempting installation.
:::

| Parameter | Expected Value | Actual Value | Match? |
|-----------|---------------|--------------|--------|
| Form factor | _____U | _______ | ☐ |
| Width | 482 mm (19") standard | _______ | ☐ |
| Depth | ≤ rack depth | _______ | ☐ |
| Weight | ≤ shelf/rail capacity | _______ | ☐ |
| Mounting method | Rails / Shelf / Custom | _______ | ☐ |

**If the server doesn't fit:**

1. **STOP** — Do not force it
2. Document the mismatch (photos + measurements)
3. File a ticket
4. Options to explore:
   - Adjustable rail kits
   - Universal rack shelves
   - Custom mounting brackets
   - Different rack (if available)
5. Get Team Lead approval before any custom solution

## Installation Procedure

### Step 1: Install Rail Kit / Shelf

**Photo: Servers Properly Installed in Rack**

![Multiple servers mounted in datacenter rack at different U positions](../images/servers-in-rack-1.jpg){width=600px}

*Production servers mounted in rack. Notice: (1) Multiple servers at different U heights, (2) Each server properly aligned and secured, (3) Front faces flush with rack posts, (4) Clear U-position spacing.*

::: {.callout-note}
## What Are Cage Nuts?

**Cage nut** = Small square metal clip that provides threaded hole for screws

**Physical description:**
- Size: About 1.5cm x 1.5cm (thumbnail-size)
- Material: Spring steel (silver metal)
- Shape: Square outer cage with threaded hole in center
- Has spring clips on sides that grip the rack hole

**Photo: Cage Nut**

![Cage nut showing square metal cage with spring clips and threaded center](../images/cage-nuts.jpg){width=400px}

*Cage nut hardware. Notice: (1) Square metal cage structure, (2) Spring clips on sides for gripping rack holes, (3) Threaded hole in center for screws, (4) Small thumbnail-sized component.*

---

**When needed:**
- Some rack posts have square holes (no threads)
- Cage nut slides into square hole
- Screw goes through rail bracket → into cage nut

**How to install:**
1. Use **cage nut tool** (small hook tool from tool cart)
2. Hook the cage nut with the tool
3. Align cage nut with square hole on rack post
4. Push cage nut into hole until it clicks/seats
5. Cage nut now provides threaded hole for screw

**Note:** Some racks have pre-threaded round holes (no cage nuts needed). Ask Team Lead which type your rack uses.

::: {.callout-important}
## First-Time Installation
**Before installing cage nuts the first time, ask your Team Lead for hands-on demonstration.**

Cage nuts are small components that are easier to learn by seeing and doing rather than from photos. Your Team Lead will show you:
- What cage nuts look like
- How to hold the cage nut tool
- How to align and insert cage nuts
- How to verify they're properly seated
:::
:::

**Photo: Rack Rail System**

![Rack rail system showing mounting components](../images/rack-rail-system.jpg){width=600px}

*Rack rail system. Notice: (1) Rail components and brackets, (2) Mounting hardware, (3) How rails attach to rack posts for server installation.*

#### For Rail Kit Installation:

**Tools needed:** Screwdriver (Phillips), cage nut tool (if needed), measuring tape

**Left Rail - Detailed Installation:**

1. **Identify the rail kit** for your server model
   - HP DL385 has specific rail kit
   - Rails are marked "L" (left) and "R" (right)

2. **Find your U position** on the rack
   - Example: Installing at U15
   - Stand at front of rack
   - Count UP from bottom: U1, U2... U15
   - Mark U15 on a piece of tape (temporary reference)

3. **Start at the REAR of the rack:**
   - Hold left rail with rear end (end with brackets/hooks)
   - Align rear bracket with rear rack post at U15
   - Look for square holes or threaded holes at U15

4. **If rack has square holes (cage nuts needed):**
   - Install cage nut first (see above)
   - Insert screw through rail bracket hole
   - Screw goes into cage nut
   - Tighten loosely (don't fully tighten yet)

5. **If rack has threaded round holes:**
   - Insert screw through rail bracket hole directly into rack hole
   - Tighten loosely

6. **Extend rail toward front:**
   - Slide the rail forward (it telescopes/extends)
   - Pull until it reaches the front rack post

7. **Attach front bracket:**
   - Align front bracket with front rack post at **same U15**
   - **Critical:** Front and rear MUST be at same U number
   - Install screws at front (loosely)

8. **Check alignment:**
   - Look along the rail from side
   - Rail should be straight front-to-rear
   - Both ends at same U height

9. **Tighten all screws:**
   - Tighten rear screws fully
   - Tighten front screws fully

10. **Test the rail:**
    - Try to wiggle it — should be solid, no movement
    - Slide mechanism should extend smoothly

**Right Rail Installation:**

11. **Repeat steps 2-10 for the right rail**
    - **CRITICAL:** Right rail MUST be at same U15 as left rail
    - If rails are at different heights, server will tilt and won't slide in

**Verification:**
- [ ] Both rails are at the **exact same U position** (count from bottom for each)
- [ ] Rails are firmly secured (wiggle test — no movement)
- [ ] Rail extension mechanism works smoothly (slide in/out test)
- [ ] Looking from front, both rails appear at same height

::: {.callout-warning}
## ❌ Troubleshooting: Rail Installation

**Problem:** Rail won't align with rack post holes

**Check:**
1. Are you at the correct U position? (Count from bottom)
2. Is this the right rail kit for this rack type?
3. Are you using the correct holes on the rail bracket? (some have multiple)

**Problem:** Rails at different heights

**Check:**
1. Count U positions again from bottom for BOTH rails
2. Loosen screws, realign, retighten
3. Ask Team Lead to verify before proceeding

**Problem:** Screw won't go into hole

**Check:**
1. Square hole? → Need cage nut first
2. Threaded hole? → Use correct screw size
3. Cross-threaded? → Back out, restart carefully

**If stuck:** Don't force. Ask Team Lead.
:::

#### For Shelf Installation (assembled servers without rail kits):

1. Select a shelf rated for the server's weight
   - Check shelf label for max weight (example: "Max 40kg")
   - Server weight must be ≤ shelf rating
2. Install shelf at the assigned U position (same U-counting method as rails)
3. Attach shelf to front rack posts with screws (typically 2 screws per side = 4 total)
4. **Verification:**
   - [ ] Shelf is secured with all required screws (typically 4)
   - [ ] Weight rating is adequate (server weight ≤ shelf max)
   - [ ] Shelf is firmly attached (wiggle test — should not move)

### Step 2: Mount the Server

**Safety:** **Two people required** — one on each side of the rack. Servers are heavy (20-30kg). Never lift alone.

#### For Rail-Mounted Servers:

1. **Lift server to rack height:**
   - One person on left, one on right
   - Lift together using proper technique (bend knees, straight back)
   - Position server in front of rails at correct height

2. **Align server with rails:**
   - Look at sides of server — you'll see metal rail guides or brackets
   - These must align with the rack rails you installed
   - Server rail guides slide onto/into rack rails

3. **Start sliding the server in:**
   - Push gently and evenly from both sides
   - Server should slide smoothly on rails
   - If it feels stuck, **STOP** (see troubleshooting below)

4. **Push server all the way in:**
   - Keep pushing until server reaches the rear stop
   - You may hear/feel a click when fully seated
   - Front face of server should be flush with rack posts

5. **Secure the server:**
   - Install thumbscrews or latches at front
   - Typically 2 screws (one on each side)
   - Hand-tighten (no power tools needed)

#### For Shelf-Mounted Servers:

1. **Lift server onto shelf:**
   - Two people required
   - Center the server on the shelf
   - Ensure server is not overhanging front or rear

2. **Secure the server:**
   - Use Velcro straps or shelf retainers to prevent sliding
   - Some shelves have built-in clips or brackets

::: {.callout-warning}
## ❌ Troubleshooting: Server Won't Slide In

**Problem:** Server feels stuck, won't slide smoothly on rails

**Check these in order:**

1. **Rails at same height?**
   - Look at left and right rails from front
   - Do they appear at same level?
   - If uneven → Server will bind/tilt → Won't slide
   - Fix: Remove server, check rail U positions, realign

2. **Server rail guides aligned?**
   - Server has metal guides on sides
   - These must line up with rack rail channels
   - Try lifting server slightly and repositioning

3. **Obstructions?**
   - Check for cables in the way
   - Check for equipment behind server position
   - Check rails are fully extended

4. **Wrong rail kit?**
   - Some servers need specific rail kits
   - Generic rails may not fit all servers
   - Ask Team Lead to verify rail kit model

**NEVER force a server.** If it doesn't slide smoothly, something is wrong. Pull back and troubleshoot.
:::

::: {.callout-warning}
## ❌ Troubleshooting: Server Tilts When Sliding

**Problem:** Server angles down or to one side while sliding

**This means:** Rails are NOT at the same height

**Fix:**
1. Remove server from rack (pull back out)
2. Check left rail U position (count from bottom)
3. Check right rail U position (count from bottom)
4. If different → Loosen one rail, move to match other, retighten
5. Verify both rails at exact same U number
6. Try sliding server again
:::

### Step 3: Alignment Verification

After mounting, verify these visual checks:

**How to Check if Server is Centered:**
1. Stand in front of rack
2. Look at gap between server and left rack post
3. Look at gap between server and right rack post
4. Gaps should be roughly equal (use finger-width method)
   - Example: 2 fingers wide on both sides = centered ✅
   - Example: 1 finger left, 3 fingers right = not centered ❌
5. Small differences (±5mm) are fine
6. If very uneven → Loosen front screws, shift server, retighten

**Photo: Server Installed in Rack - Close-Up View**

![Server properly seated in rack showing alignment and accessibility](../images/servers-in-rack-2.jpg){width=600px}

*Server properly installed. Notice: (1) Front face flush with rack, (2) Equal spacing on both sides (centered), (3) Front panel accessible, (4) Proper alignment with neighboring equipment.*

---

**Verification Checklist:**

| Check | How to Verify | Status |
|-------|--------------|--------|
| Server is centered | Equal gap left and right (finger-width test) | ☐ |
| Server is fully seated | Front face is flush with rack posts (no gap) | ☐ |
| Front panel accessible | All buttons and indicators visible and reachable | ☐ |
| Drive bays accessible | Can insert/remove drives without obstruction | ☐ |
| Rear ports accessible | All rear ports reachable from behind rack | ☐ |
| No contact with neighbors | Gap exists above and below (at least 1-2cm) | ☐ |
| Airflow path clear | Front intake and rear exhaust unobstructed (no cables blocking) | ☐ |
| Thumbscrews installed | Front mounting screws hand-tightened | ☐ |

: Post-Mount Alignment Checks {.striped}

::: {.callout-note}
## Why These Checks Matter

- **Centered:** Even weight distribution on rails
- **Fully seated:** Proper airflow, cable connections reachable
- **Gaps above/below:** Prevents contact when rack vibrates
- **Airflow clear:** Servers need cold air in front, hot air out rear
:::

### Step 4: Install Blank Panels

**Critical:** After installing the server, fill all empty U spaces with blank panels.

::: {.callout-important}
## Why Blank Panels Are Required

**Blank panels** = Metal filler plates that cover empty U spaces in the rack

**Why they're critical:**

1. **Airflow Management (Most Important)**
   - Datacenters use hot aisle / cold aisle layout
   - Cold air comes from front → servers pull it in → hot air exits rear
   - **Without blank panels:** Cold air escapes through gaps → doesn't reach servers
   - **With blank panels:** Forces all air to flow THROUGH servers
   - Prevents hot air recirculation from rear to front

2. **Prevents Overheating**
   - Gaps = hot air from rear mixes with cold air at front
   - Servers starve for cold air → overheat → thermal shutdown
   - Blank panels ensure consistent intake temperature (18-27°C)

3. **Energy Efficiency**
   - Gaps = wasted cooling energy (cold air escapes without cooling servers)
   - HVAC must work harder → higher power costs
   - Blank panels can reduce cooling costs by 10-30%

4. **Industry Standard**
   - ASHRAE (datacenter standards) requires blank panels
   - Professional datacenters always use them
   - Part of proper airflow containment
:::

**Installation:**
1. Identify all gaps (empty U spaces) above and below the server
2. Count the U height of each gap
   - Example: Gap from U10-U14 = 5U gap
3. Select blank panel(s) that fit the gap
   - Blank panels come in 1U, 2U, 3U, 4U sizes
   - Mix sizes to fill the gap (example: 5U gap = 3U panel + 2U panel)
4. Install blank panels using screws or tool-less clips
5. Verify: No open U spaces visible

**Verification:**
- [ ] All gaps above server filled with blank panels
- [ ] All gaps below server filled with blank panels
- [ ] Blank panels secured (screwed in or clipped)
- [ ] No open U spaces in rack (except planned for future servers)

---

### Step 5: Label the Server

Immediately after mounting:

- [ ] Attach a label to the **front** of the server with:
  - Server name/ID
  - Rack position (e.g., "Rack A, 15U-16U")
  - Serial number
  - Date of installation
- [ ] Attach a label to the **rear** with:
  - Server name/ID
  - Network port assignments

## Maker-Checker Sign-Off

| Item | Maker Sign | Checker Sign | Date/Time |
|------|-----------|-------------|-----------|
| Rack prepared and level | _______ | _______ | _______ |
| Server compatibility verified | _______ | _______ | _______ |
| Rail/shelf installed correctly | _______ | _______ | _______ |
| Server mounted and secured | _______ | _______ | _______ |
| Alignment verified | _______ | _______ | _______ |
| Server labeled | _______ | _______ | _______ |
| Photos taken (front and rear) | _______ | _______ | _______ |

## Post-Installation Photograph Requirements

Take and archive the following photos:

1. **Front view** of installed server in rack (with label visible)
2. **Rear view** showing port layout
3. **Side view** (if accessible) showing airflow gap
4. **Full rack front view** showing server in context
5. **Full rack rear view** showing cable management

## Record Keeping

For each server installation, record:

- Installation ticket number
- Server serial number and model
- Rack ID and U position
- Rail kit / shelf used
- Maker-Checker sign-off form
- All photographs
- Any issues encountered and resolutions
- Time taken for installation

---

::: {.callout-note}
## Continuous Improvement
If you encounter a new issue not covered in this SOP, **document it immediately** and file a ticket. This SOP will be updated based on your findings.
:::

